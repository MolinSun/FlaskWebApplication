<h3><a href="/home">< Back to Home </a></h3>
<h1>My Profile</h1>
<div>
    
    
    <h3>(not changeable)email/phone: {{user.username}}</h3>
    <h3>name: {{user.nickname}}</h3>
    <h3>school class: {{user.school_class}}</h3>
    <h3>school grade: {{user.school_grade}}</h3>
    <p>password: {{user.password}}</p>
    <br/>
    <a href="/profiles/update/{{user.id}}" id="{{user.id}}">Update</a>
</div>

<!-- import jquery-->
<script src="https://cdn.bootcss.com/jquery/1.12.4/jquery.min.js"></script>
<!--Send an Ajax request to delete the userid -->
<script type="text/javascript">
    $('a.btn-delete').on('click',function(evt){
        evt.preventDefault();
        // get ID of user
        var userid = $(this).attr('id');
        $.ajax({
            // request URL
            url: "/profiles/" + userid,
            // type of reuest
            type: "DELETE",
            contentType:"application/json",
            // Response function when delete successfully
            success:function(resp){
                // Open profile on the current page
                window.open("/profiles","_self");
            },
            // Response function when delete failed
            error:function(resp){
                // alert when delete failed
                alert("delete failed！detail：" + resp.message);
            }
        })
    });
</script>
